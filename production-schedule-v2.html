<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M. Chat & Pâtisserie Fruits 팝업 납품</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A4 가로 사이즈: 297mm x 210mm */
        @media screen {
            .a4-landscape {
                width: 297mm;
                height: 210mm;
                margin: 0 auto;
                background: white;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
                padding: 15mm;
                box-sizing: border-box;
            }
        }
        
        @media print {
            @page {
                size: A4 landscape;
                margin: 0;
            }
            body {
                margin: 0;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .a4-landscape {
                width: 297mm;
                height: 210mm;
                margin: 0;
                box-shadow: none;
                padding: 15mm;
                page-break-after: always;
            }
            .no-print {
                display: none !important;
            }
        }
        
        /* 테이블 스타일 최적화 */
        table {
            font-size: 11px;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #e5e7eb;
            padding: 4px 6px;
        }
        thead th {
            font-weight: bold;
        }
        
        /* 컬러 프린트 최적화 */
        .bg-green-100 { background-color: #d1fae5 !important; }
        .bg-yellow-100 { background-color: #fef3c7 !important; }
        .bg-orange-100 { background-color: #fed7aa !important; }
        .bg-red-100 { background-color: #fee2e2 !important; }
        .bg-blue-50 { background-color: #eff6ff !important; }
        .bg-blue-100 { background-color: #dbeafe !important; }
        .bg-orange-50 { background-color: #fff7ed !important; }
        .bg-green-50 { background-color: #f0fdf4 !important; }
        .bg-purple-50 { background-color: #faf5ff !important; }
    </style>
</head>
<body class="bg-gray-100 print:bg-white">
    <!-- PDF 다운로드 버튼 (화면에서만 표시) -->
    <div class="no-print p-4 text-center">
        <button onclick="window.print()" class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600">
            PDF로 저장 (Ctrl+P)
        </button>
        <p class="text-sm text-gray-600 mt-2">인쇄 미리보기에서 "가로 방향" 선택 후 "PDF로 저장"을 선택하세요</p>
    </div>

    <!-- A4 가로 페이지 -->
    <div class="a4-landscape">
        <div class="h-full flex flex-col">
            <!-- 헤더 -->
            <div class="mb-3">
                <h1 class="text-xl font-bold text-gray-900">
                    <strong>M. Chat</strong> & <strong>Pâtisserie Fruits</strong> <em>팝업 납품</em>
                </h1>
                <p class="text-gray-600 text-xs">2025년 8월 물량 소진 및 입고 현황</p>
            </div>

            <!-- 메인 테이블 -->
            <div class="flex-1 overflow-hidden">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-800 text-white">
                            <th rowspan="2" class="text-center">날짜</th>
                            <th rowspan="2" class="text-center w-10">요일</th>
                            <th colspan="3" class="text-center bg-orange-700">판매 소진 수량</th>
                            <th colspan="2" class="text-center bg-red-700">전여 재고</th>
                            <th rowspan="2" class="text-center w-10">입고</th>
                            <th colspan="4" class="text-center bg-green-700">입고 수량</th>
                            <th rowspan="2" class="text-center bg-purple-700 w-24">생산<br/>계획</th>
                        </tr>
                        <tr class="bg-gray-700 text-white text-xs">
                            <th class="text-center bg-orange-600">토스트</th>
                            <th class="text-center bg-orange-600">복숭아</th>
                            <th class="text-center bg-orange-600">브륄레</th>
                            <th class="text-center bg-red-600">토스트</th>
                            <th class="text-center bg-red-600">복숭아</th>
                            <th class="text-center bg-green-600">토스트</th>
                            <th class="text-center bg-green-600">복숭아</th>
                            <th class="text-center bg-green-600">휠버터</th>
                            <th class="text-center bg-green-600">브륄레</th>
                        </tr>
                    </thead>
                    <tbody id="dataBody">
                        <!-- 데이터가 여기에 삽입됩니다 -->
                    </tbody>
                </table>
            </div>

            <!-- 하단 범례 -->
            <div class="mt-3 border border-gray-300 rounded p-2 bg-gray-50">
                <div class="flex items-center justify-between">
                    <div class="text-xs">
                        <span class="font-bold">재고 상태:</span>
                        <span class="inline-block w-3 h-3 bg-green-100 border border-green-300 align-middle"></span> 충분(300+)
                        <span class="inline-block w-3 h-3 bg-yellow-100 border border-yellow-300 align-middle ml-2"></span> 보통(100-299)
                        <span class="inline-block w-3 h-3 bg-orange-100 border border-orange-300 align-middle ml-2"></span> 부족(0-99)
                        <span class="inline-block w-3 h-3 bg-red-100 border border-red-300 align-middle ml-2"></span> <strong>긴급(음수)</strong>
                    </div>
                    <div class="text-xs text-gray-600">
                        파란색: 주말 | 초록색: 입고일
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const data = [
            { date: '2025-08-06', day: '수', consumption: [40, 40, 30], carryover: [460, 460], receipt: [320, 320, 320, 230], completed: true },
            { date: '2025-08-07', day: '목', consumption: [40, 40, 30], carryover: [420, 420], receipt: null, completed: false },
            { date: '2025-08-08', day: '금', consumption: [40, 40, 30], carryover: [380, 380], receipt: null, completed: false },
            { date: '2025-08-09', day: '토', consumption: [100, 100, 70], carryover: [280, 280], receipt: null, completed: false },
            { date: '2025-08-10', day: '일', consumption: [100, 100, 70], carryover: [180, 180], receipt: null, completed: false },
            { date: '2025-08-11', day: '월', consumption: [40, 40, 30], carryover: [140, 140], receipt: [80, 80, 80, 60], completed: true },
            { date: '2025-08-12', day: '화', consumption: [40, 40, 30], carryover: [100, 100], receipt: null, completed: false },
            { date: '2025-08-13', day: '수', consumption: [40, 40, 30], carryover: [60, 60], receipt: [120, 120, 120, 90], completed: true },
            { date: '2025-08-14', day: '목', consumption: [40, 40, 30], carryover: [20, 20], receipt: null, completed: false },
            { date: '2025-08-15', day: '금', consumption: [40, 40, 30], carryover: [-20, -20], receipt: null, completed: false },
            { date: '2025-08-16', day: '토', consumption: [100, 100, 70], carryover: [-120, -120], receipt: [200, 200, 200, 140], completed: true },
            { date: '2025-08-17', day: '일', consumption: [100, 100, 70], carryover: [-220, -220], receipt: null, completed: false },
            { date: '2025-08-18', day: '월', consumption: [40, 40, 30], carryover: [-260, -260], receipt: [80, 80, 80, 60], completed: true },
            { date: '2025-08-19', day: '화', consumption: [40, 40, 30], carryover: [-300, -300], receipt: null, completed: false },
            { date: '2025-08-20', day: '수', consumption: [40, 40, 30], carryover: [-340, -340], receipt: [120, 120, 120, 90], completed: true },
            { date: '2025-08-21', day: '목', consumption: [40, 40, 30], carryover: [-380, -380], receipt: null, completed: false },
            { date: '2025-08-22', day: '금', consumption: [40, 40, 30], carryover: [-420, -420], receipt: null, completed: false },
            { date: '2025-08-23', day: '토', consumption: [100, 100, 70], carryover: [-520, -520], receipt: [200, 200, 200, 140], completed: true },
            { date: '2025-08-24', day: '일', consumption: [100, 100, 70], carryover: [-620, -620], receipt: null, completed: false },
            { date: '2025-08-25', day: '월', consumption: [40, 40, 30], carryover: [-660, -660], receipt: [80, 80, 80, 60], completed: true },
            { date: '2025-08-26', day: '화', consumption: [40, 40, 30], carryover: [-700, -700], receipt: null, completed: false },
            { date: '2025-08-27', day: '수', consumption: [40, 40, 30], carryover: [-740, -740], receipt: [320, 320, 320, 230], completed: true },
            { date: '2025-08-28', day: '목', consumption: [40, 40, 30], carryover: [-780, -780], receipt: null, completed: false },
            { date: '2025-08-29', day: '금', consumption: [40, 40, 30], carryover: [-820, -820], receipt: null, completed: false },
            { date: '2025-08-30', day: '토', consumption: [100, 100, 70], carryover: [-920, -920], receipt: null, completed: false },
            { date: '2025-08-31', day: '일', consumption: [100, 100, 70], carryover: [-1020, -1020], receipt: null, completed: false }
        ];

        function getCellClass(value, type) {
            if (type === 'carryover') {
                if (value >= 300) return 'bg-green-100 text-green-800 font-semibold';
                if (value >= 100) return 'bg-yellow-100 text-yellow-800 font-semibold';
                if (value >= 0) return 'bg-orange-100 text-orange-800 font-semibold';
                return 'bg-red-100 text-red-800 font-bold';
            }
            return '';
        }

        function renderTable() {
            const tbody = document.getElementById('dataBody');
            tbody.innerHTML = '';

            data.forEach((row) => {
                const tr = document.createElement('tr');
                const isWeekend = row.day === '토' || row.day === '일';
                if (isWeekend) tr.className = 'bg-blue-50';

                // 날짜
                tr.innerHTML += `<td class="text-center ${isWeekend ? 'bg-blue-100' : ''}">${row.date}</td>`;
                
                // 요일
                tr.innerHTML += `<td class="text-center font-medium ${isWeekend ? 'bg-blue-100 text-blue-800' : ''}">${row.day}</td>`;
                
                // 소진 수량
                row.consumption.forEach(val => {
                    tr.innerHTML += `<td class="text-center bg-orange-50">${val}</td>`;
                });
                
                // 전여 재고
                row.carryover.forEach(val => {
                    tr.innerHTML += `<td class="text-center ${getCellClass(val, 'carryover')}">${val}</td>`;
                });
                
                // 입고 여부
                tr.innerHTML += `<td class="text-center">
                    ${row.completed ? '<svg class="w-4 h-4 text-green-600 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>' : ''}
                </td>`;
                
                // 입고 수량
                if (row.receipt) {
                    row.receipt.forEach(val => {
                        tr.innerHTML += `<td class="text-center bg-green-50 font-semibold text-green-800">${val}</td>`;
                    });
                } else {
                    for (let i = 0; i < 4; i++) {
                        tr.innerHTML += `<td class="text-center text-gray-400">-</td>`;
                    }
                }
                
                // 생산 계획
                tr.innerHTML += `<td class="bg-purple-50 border-purple-200"></td>`;

                tbody.appendChild(tr);
            });
        }

        // 페이지 로드 시 테이블 렌더링
        renderTable();
    </script>
</body>
</html>